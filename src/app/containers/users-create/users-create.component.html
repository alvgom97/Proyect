<h2 id="title">Nuevo Usuario</h2>

<mat-tab-group dynamicHeight mat-stretch-tabs class="container example-stretched-tabs mat-elevation-z4">
  <mat-accordion>
    <mat-tab label="Paciente">

      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Datos Personales:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Nombre:</mat-label>
            <input matInput placeholder="Álvaro" [formControl]="firstName" required />
            <mat-error *ngIf="firstName.invalid">{{getErrorMessage(firstName)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Primer apellido:</mat-label>
            <input matInput placeholder="Gómez" [formControl]="lastName" required />
            <mat-error *ngIf="lastName.invalid">{{getErrorMessage(lastName)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Segundo apellido:</mat-label>
            <input matInput placeholder="Martín" [formControl]="secondLastName" />
            <mat-error *ngIf="secondLastName.invalid">{{getErrorMessage(secondLastName)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Género:</mat-label>
            <mat-select name="gender" formControlName="gender">
              <mat-option *ngFor="let gender of genders" [value]="gender">{{gender}}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Fecha de Nacimiento:</mat-label>
            <input matInput placeholder="04/05/1997" [formControl]="birthdate" />
            <mat-error *ngIf="birthdate.invalid">{{getErrorMessage(birthdate)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Num de Identificación:</mat-label>
            <input matInput placeholder="12345678Z" [formControl]="identityNumber" />
            <mat-error *ngIf="identityNumber.invalid">{{getErrorMessage(identityNumber)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Num de Historial Clínico:</mat-label>
            <input matInput placeholder="9876543210" [formControl]="nhc" required />
            <mat-error *ngIf="nhc.invalid">{{getErrorMessage(nhc)}}</mat-error>
          </mat-form-field>

        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Dirección:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Calle:</mat-label>
            <input matInput placeholder="Calle Mayor" [formControl]="street" />
            <mat-error *ngIf="street.invalid">{{getErrorMessage(street)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Número:</mat-label>
            <input matInput placeholder="14" [formControl]="number" />
            <mat-error *ngIf="number.invalid">{{getErrorMessage(number)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Puerta:</mat-label>
            <input matInput placeholder="4ºD" [formControl]="door" />
            <mat-error *ngIf="door.invalid">{{getErrorMessage(door)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Código Postal:</mat-label>
            <input matInput placeholder="28922" [formControl]="postalCode" />
            <mat-error *ngIf="postalCode.invalid">{{getErrorMessage(postalCode)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Ciudad:</mat-label>
            <input matInput placeholder="Alcorcón" [formControl]="city" />
            <mat-error *ngIf="city.invalid">{{getErrorMessage(city)}}</mat-error>
          </mat-form-field>

        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Aseguradoras:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Seleccione:</mat-label>
            <mat-select name="issurance" [formControl]="issuranceList" multiple>
              <mat-option *ngFor="let issurance of issurances" [value]="issurance">
                {{issurance?.name}} ({{issurance?.type}})
              </mat-option>
            </mat-select>
          </mat-form-field>


        </mat-expansion-panel>

        <div id="submit">
          <button mat-fab type="submit" color="primary" [disabled]="!profileForm.valid"><mat-icon>send</mat-icon></button>
        </div>
        

      </form>
    </mat-tab>
    <mat-tab label="Profesional">

      <form [formGroup]="profileFormProf" (ngSubmit)="onSubmitProf()">

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Datos Personales:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Nombre:</mat-label>
            <input matInput placeholder="Álvaro" [formControl]="firstNameProf" required>
            <mat-error *ngIf="firstNameProf.invalid">{{getErrorMessage(firstNameProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Primer apellido:</mat-label>
            <input matInput placeholder="Gómez" [formControl]="lastNameProf" required>
            <mat-error *ngIf="lastNameProf.invalid">{{getErrorMessage(lastNameProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Segundo apellido:</mat-label>
            <input matInput placeholder="Martín" [formControl]="secondLastNameProf">
            <mat-error *ngIf="secondLastNameProf.invalid">{{getErrorMessage(secondLastNameProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Género:</mat-label>
            <mat-select  name="gender" formControlName="genderProf">
              <mat-option *ngFor="let gender of genders" [value]="gender">{{gender}}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Fecha de Nacimiento:</mat-label>
            <input matInput placeholder="04/05/1997" [formControl]="birthdateProf" />
            <mat-error *ngIf="birthdateProf.invalid">{{getErrorMessage(birthdateProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Num de Identificación:</mat-label>
            <input matInput placeholder="12345678Z" [formControl]="identityNumberProf">
            <mat-error *ngIf="identityNumberProf.invalid">{{getErrorMessage(identityNumberProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Num de Colegiado:</mat-label>
            <input matInput placeholder="9876543210" [formControl]="medicalBoardNumber" required>
            <mat-error *ngIf="medicalBoardNumber.invalid">{{getErrorMessage(medicalBoardNumber)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Tipo de Profesional:</mat-label>
            <mat-select name="professionalType" [formControl]="professionalType" >
              <mat-option *ngFor="let prof of professionalTypeList" [value]="prof">
                {{prof}}
              </mat-option>
            </mat-select>
          </mat-form-field>

        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Dirección:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Calle:</mat-label>
            <input matInput placeholder="Calle Mayor" [formControl]="streetProf" />
            <mat-error *ngIf="streetProf.invalid">{{getErrorMessage(streetProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Número:</mat-label>
            <input matInput placeholder="14" [formControl]="numberProf" />
            <mat-error *ngIf="numberProf.invalid">{{getErrorMessage(numberProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Puerta:</mat-label>
            <input matInput placeholder="4ºD" [formControl]="doorProf" />
            <mat-error *ngIf="doorProf.invalid">{{getErrorMessage(doorProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Código Postal:</mat-label>
            <input matInput placeholder="28922" [formControl]="postalCodeProf" />
            <mat-error *ngIf="postalCodeProf.invalid">{{getErrorMessage(postalCodeProf)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Ciudad:</mat-label>
            <input matInput placeholder="Alcorcón" [formControl]="cityProf" />
            <mat-error *ngIf="cityProf.invalid">{{getErrorMessage(cityProf)}}</mat-error>
          </mat-form-field>

        </mat-expansion-panel>

        <div id="submit">
          <button mat-fab type="submit" color="primary" [disabled]="!profileFormProf.valid"><mat-icon>send</mat-icon></button>
        </div>

      </form>
    </mat-tab>
  </mat-accordion>
</mat-tab-group>
