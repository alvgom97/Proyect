<h2 id="title">Nuevo Usuario</h2>

<mat-tab-group dynamicHeight mat-stretch-tabs class="container example-stretched-tabs mat-elevation-z4">
  <mat-accordion>
    <mat-tab label="Paciente">

      <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Datos Personales:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Nombre:</mat-label>
            <input matInput placeholder="Álvaro" [formControl]="firstName" required />
            <mat-error *ngIf="firstName.invalid">{{getErrorMessage(firstName)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Primer apellido:</mat-label>
            <input matInput placeholder="Gómez" [formControl]="lastName" required />
            <mat-error *ngIf="lastName.invalid">{{getErrorMessage(lastName)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Segundo apellido:</mat-label>
            <input matInput placeholder="Martín" [formControl]="secondLastName" />
            <mat-error *ngIf="secondLastName.invalid">{{getErrorMessage(secondLastName)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Género:</mat-label>
            <mat-select name="gender" formControlName="gender">
              <mat-option *ngFor="let gender of genders" [value]="gender">{{gender}}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Fecha de Nacimiento:</mat-label>
            <input matInput placeholder="04/05/1997" [formControl]="birthdate" required />
            <mat-error *ngIf="birthdate.invalid">{{getErrorMessage(birthdate)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Num de Identificación:</mat-label>
            <input matInput placeholder="12345678Z" [formControl]="identityNumber" />
            <mat-error *ngIf="identityNumber.invalid">{{getErrorMessage(identityNumber)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Num de Historial Clínico:</mat-label>
            <input matInput placeholder="9876543210" [formControl]="nhc" required />
            <mat-error *ngIf="nhc.invalid">{{getErrorMessage(nhc)}}</mat-error>
          </mat-form-field>

          <mat-form-field class="hidden">
            <input matInput name="userType" [formControl]="userType"/>
          </mat-form-field>
          

        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Dirección:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Calle:</mat-label>
            <input matInput placeholder="Calle Mayor" [formControl]="street" required />
            <mat-error *ngIf="street.invalid">{{getErrorMessage(street)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Número:</mat-label>
            <input matInput placeholder="14" [formControl]="number" required />
            <mat-error *ngIf="number.invalid">{{getErrorMessage(number)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Puerta:</mat-label>
            <input matInput placeholder="4ºD" [formControl]="door" required />
            <mat-error *ngIf="door.invalid">{{getErrorMessage(door)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Código Postal:</mat-label>
            <input matInput placeholder="28922" [formControl]="postalCode" required />
            <mat-error *ngIf="postalCode.invalid">{{getErrorMessage(postalCode)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Ciudad:</mat-label>
            <input matInput placeholder="Alcorcón" [formControl]="city" required />
            <mat-error *ngIf="city.invalid">{{getErrorMessage(city)}}</mat-error>
          </mat-form-field>

        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Aseguradora:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Num de Tarjeta:</mat-label>
            <input matInput placeholder="1234567890" [formControl]="issuranceCardNumber" />
            <mat-error *ngIf="issuranceCardNumber.invalid">{{getErrorMessage(issuranceCardNumber)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Nombre:</mat-label>
            <input matInput placeholder="Mapfre" [formControl]="issuranceName" />
            <mat-error *ngIf="issuranceName.invalid">{{getErrorMessage(issuranceName)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Tipo:</mat-label>
            <mat-select name="issurance" [formControl]="issuranceType" >
              <mat-option *ngFor="let issurance of issuranceList" [value]="issurance">
                {{issurance}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="issuranceName.invalid">{{getErrorMessage(issuranceName)}}</mat-error>
          </mat-form-field>


        </mat-expansion-panel>

        <div id="submit">
          <button mat-fab type="submit" color="primary" ><mat-icon>send</mat-icon></button>
          <!-- [disabled]="!profileForm.valid" -->
        </div>
        

      </form>
    </mat-tab>
    <mat-tab label="Profesional">

      <form [formGroup]="profileFormProf" (ngSubmit)="onSubmitProf()">

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Datos Personales:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Nombre:</mat-label>
            <input matInput placeholder="Álvaro" [formControl]="firstNamePro" required>
            <mat-error *ngIf="firstNamePro.invalid">{{getErrorMessage(firstNamePro)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Primer apellido:</mat-label>
            <input matInput placeholder="Gómez" [formControl]="lastNamePro" required>
            <mat-error *ngIf="lastNamePro.invalid">{{getErrorMessage(lastNamePro)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Segundo apellido:</mat-label>
            <input matInput placeholder="Martín" [formControl]="secondLastNamePro">
            <mat-error *ngIf="secondLastNamePro.invalid">{{getErrorMessage(secondLastNamePro)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Género:</mat-label>
            <mat-select  name="gender" formControlName="genderPro">
              <mat-option *ngFor="let gender of genders" [value]="gender">{{gender}}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Fecha de Nacimiento:</mat-label>
            <input matInput [matDatepicker]="picker2" formControlName="birthdatePro">
            <mat-datepicker-toggle matSuffix [for]="picker2">
              <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>
            </mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Num de Identificación:</mat-label>
            <input matInput placeholder="12345678Z" [formControl]="identityNumberPro">
            <mat-error *ngIf="identityNumberPro.invalid">{{getErrorMessage(identityNumberPro)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Num de Colegiado:</mat-label>
            <input matInput placeholder="9876543210" [formControl]="medicalBoardNumber" required>
            <mat-error *ngIf="medicalBoardNumber.invalid">{{getErrorMessage(medicalBoardNumber)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Tipo de Profesional:</mat-label>
            <mat-select name="professionalType" formControlName="professionalType" >
              <mat-option *ngFor="let prof of professionalTypeList" [value]="prof">
                {{prof}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="hidden">
            <input matInput name="userTypePro" [formControl]="userTypePro"/>
          </mat-form-field>

        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">

          <mat-expansion-panel-header>
            <mat-panel-title>
              Dirección:
            </mat-panel-title>
          </mat-expansion-panel-header>

          <mat-form-field appearance="fill">
            <mat-label>Calle:</mat-label>
            <input matInput placeholder="Calle Mayor" [formControl]="streetPro" required />
            <mat-error *ngIf="streetPro.invalid">{{getErrorMessage(streetPro)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Número:</mat-label>
            <input matInput placeholder="14" [formControl]="numberPro" required />
            <mat-error *ngIf="numberPro.invalid">{{getErrorMessage(numberPro)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Puerta:</mat-label>
            <input matInput placeholder="4ºD" [formControl]="doorPro" required />
            <mat-error *ngIf="doorPro.invalid">{{getErrorMessage(doorPro)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Código Postal:</mat-label>
            <input matInput placeholder="28922" [formControl]="postalCodePro" required />
            <mat-error *ngIf="postalCodePro.invalid">{{getErrorMessage(postalCodePro)}}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Ciudad:</mat-label>
            <input matInput placeholder="Alcorcón" [formControl]="cityPro" required />
            <mat-error *ngIf="cityPro.invalid">{{getErrorMessage(cityPro)}}</mat-error>
          </mat-form-field>

        </mat-expansion-panel>

        <div id="submit">
          <button mat-fab type="submit" color="primary" ><mat-icon>send</mat-icon></button>
          <!-- [disabled]="!profileFormProf.valid" -->
        </div>

      </form>
    </mat-tab>
  </mat-accordion>
</mat-tab-group>
